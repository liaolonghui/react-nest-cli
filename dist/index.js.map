{"version":3,"sources":["../packages/cli/src/index.ts","../packages/cli/src/configs/text.config.ts","../packages/cli/src/configs/prompts.config.ts"],"sourcesContent":["#!/usr/bin/env node\nimport { program } from \"commander\";\nimport picocolors from \"picocolors\"; // 也可用chalk\nimport figlet from 'figlet';\nimport prompts from 'prompts'; // 也可用inquirer、手动readline等\nimport consola from \"consola\";\nimport ora from 'ora';\nimport { downloadTemplate } from 'giget';\nimport path from 'node:path';\nimport fsExtra from 'fs-extra';\nimport textConfig from './configs/text.config.ts';\nimport promptsConfig from \"./configs/prompts.config.ts\";\n\n\n// 输出项目信息\nconst logInfo = () => {\n    console.info(picocolors.yellow(figlet.textSync('React Nest CLI', textConfig)))\n    consola.start(picocolors.yellow(program.description()))\n    consola.info(picocolors.yellow(program.version()))\n}\n\n\nprogram\n    .version(\"1.0.0\", '-V, --version', '输出版本号')\n    .helpOption('-h, --help', '输出帮助信息')\n    // .help((str) => '帮助信息：\\n' + str)\n    .description(\"一个脚手架工具，用于快速生成 React+Nest 项目\")\n    .action(logInfo);\n\n// 输出项目信息\nprogram\n    .command('info')\n    .description('输出项目信息')\n    .action(logInfo);\n\n// 初始化项目\nprogram\n    .command('init')\n    .description('初始化项目')\n    .argument('[project-name]', '项目名称')\n    .option('--template <template-name>', '项目模板名称')\n    .action(async (projectName, rest) => {\n        let { template } = rest || {};\n        // 如果projectName没有提供，让用户输入\n        if (!projectName) {\n            const response = await prompts({\n                type: 'text',\n                initial: 'my-project', // 默认值\n                name: 'projectName',\n                message: '请输入项目名称',\n                // validate: value => value.length ? true : '请输入项目名称'\n            });\n            projectName = response.projectName;\n        }\n\n        // 如果template没有提供或者template不存在，让用户选择\n        const noTemplate = (template && !promptsConfig.templates.find(item => item.value === template));\n        if (!template || noTemplate) {\n            if (noTemplate) {\n                consola.error(`项目模板 ${template} 不存在, 请选择其他模板`);\n            }\n            const response = await prompts({\n                type: 'select',\n                name: 'template',\n                message: '请选择项目模板',\n                choices: promptsConfig.templates,\n                initial: 0, // 默认选择第一个\n            });\n            template = response.template;\n        }\n\n        const tip = `初始化项目 ${projectName}，模板 ${template}`;\n        const spinner = ora({\n            text: tip,\n            color: 'blue',\n            // spinner: 'growVertical',\n            // isEnabled: false\n        });\n        spinner.start();\n\n        const projectDir = path.resolve(import.meta.dirname, projectName);\n        if (fsExtra.existsSync(projectDir)) {\n            spinner.fail(`💥初始化失败: 项目目录 ${projectName} 已存在`);\n            return;\n        }\n\n        const res = await downloadTemplate(`github:liaolonghui/react-nest-cli/packages/templates/${template}#main`, {\n            dir: projectDir,\n        });\n        const { dir } = res;\n        spinner.succeed(`项目初始化成功，项目目录：${dir}`);\n        // console.log(res);\n\n    });\n\n// 输出版本号\nprogram.command('version')\n    .description('输出版本号')\n    .action(() => {\n        // 全局option -V, --version 已被注册，这里无需再注册version命令，只是为了演示\n        consola.info(figlet.textSync(`version ==> ${program.version()}`, textConfig));\n    });\n\nprogram.parse();","import type { FigletOptions } from \"figlet\";\n\nexport default {\n    font: \"Ghost\",\n    horizontalLayout: \"default\",\n    verticalLayout: \"default\",\n    width: 200,\n    whitespaceBreak: true,\n} as FigletOptions","\n\nexport default {\n    templates: [\n        { title: 'React + Nest', value: 'react-nest', description: '这个模板包含了 React + Nest 项目的基本配置', disabled: false },\n        { title: 'React + Nest + TypeScript', value: 'react-nest-ts', description: '这个模板包含了 React + Nest + TypeScript 项目的基本配置', disabled: false },\n    ]\n}"],"mappings":";;;AACA,SAAS,eAAe;AACxB,OAAO,gBAAgB;AACvB,OAAO,YAAY;AACnB,OAAO,aAAa;AACpB,OAAO,aAAa;AACpB,OAAO,SAAS;AAChB,SAAS,wBAAwB;AACjC,OAAO,UAAU;AACjB,OAAO,aAAa;;;ACPpB,IAAO,sBAAQ;AAAA,EACX,MAAM;AAAA,EACN,kBAAkB;AAAA,EAClB,gBAAgB;AAAA,EAChB,OAAO;AAAA,EACP,iBAAiB;AACrB;;;ACNA,IAAO,yBAAQ;AAAA,EACX,WAAW;AAAA,IACP,EAAE,OAAO,gBAAgB,OAAO,cAAc,aAAa,sGAAgC,UAAU,MAAM;AAAA,IAC3G,EAAE,OAAO,6BAA6B,OAAO,iBAAiB,aAAa,mHAA6C,UAAU,MAAM;AAAA,EAC5I;AACJ;;;AFQA,IAAM,UAAU,MAAM;AAClB,UAAQ,KAAK,WAAW,OAAO,OAAO,SAAS,kBAAkB,mBAAU,CAAC,CAAC;AAC7E,UAAQ,MAAM,WAAW,OAAO,QAAQ,YAAY,CAAC,CAAC;AACtD,UAAQ,KAAK,WAAW,OAAO,QAAQ,QAAQ,CAAC,CAAC;AACrD;AAGA,QACK,QAAQ,SAAS,iBAAiB,gCAAO,EACzC,WAAW,cAAc,sCAAQ,EAEjC,YAAY,8GAA8B,EAC1C,OAAO,OAAO;AAGnB,QACK,QAAQ,MAAM,EACd,YAAY,sCAAQ,EACpB,OAAO,OAAO;AAGnB,QACK,QAAQ,MAAM,EACd,YAAY,gCAAO,EACnB,SAAS,kBAAkB,0BAAM,EACjC,OAAO,8BAA8B,sCAAQ,EAC7C,OAAO,OAAO,aAAa,SAAS;AACjC,MAAI,EAAE,SAAS,IAAI,QAAQ,CAAC;AAE5B,MAAI,CAAC,aAAa;AACd,UAAM,WAAW,MAAM,QAAQ;AAAA,MAC3B,MAAM;AAAA,MACN,SAAS;AAAA;AAAA,MACT,MAAM;AAAA,MACN,SAAS;AAAA;AAAA,IAEb,CAAC;AACD,kBAAc,SAAS;AAAA,EAC3B;AAGA,QAAM,aAAc,YAAY,CAAC,uBAAc,UAAU,KAAK,UAAQ,KAAK,UAAU,QAAQ;AAC7F,MAAI,CAAC,YAAY,YAAY;AACzB,QAAI,YAAY;AACZ,cAAQ,MAAM,4BAAQ,QAAQ,iEAAe;AAAA,IACjD;AACA,UAAM,WAAW,MAAM,QAAQ;AAAA,MAC3B,MAAM;AAAA,MACN,MAAM;AAAA,MACN,SAAS;AAAA,MACT,SAAS,uBAAc;AAAA,MACvB,SAAS;AAAA;AAAA,IACb,CAAC;AACD,eAAW,SAAS;AAAA,EACxB;AAEA,QAAM,MAAM,kCAAS,WAAW,sBAAO,QAAQ;AAC/C,QAAM,UAAU,IAAI;AAAA,IAChB,MAAM;AAAA,IACN,OAAO;AAAA;AAAA;AAAA,EAGX,CAAC;AACD,UAAQ,MAAM;AAEd,QAAM,aAAa,KAAK,QAAQ,YAAY,SAAS,WAAW;AAChE,MAAI,QAAQ,WAAW,UAAU,GAAG;AAChC,YAAQ,KAAK,qEAAiB,WAAW,qBAAM;AAC/C;AAAA,EACJ;AAEA,QAAM,MAAM,MAAM,iBAAiB,wDAAwD,QAAQ,SAAS;AAAA,IACxG,KAAK;AAAA,EACT,CAAC;AACD,QAAM,EAAE,IAAI,IAAI;AAChB,UAAQ,QAAQ,iFAAgB,GAAG,EAAE;AAGzC,CAAC;AAGL,QAAQ,QAAQ,SAAS,EACpB,YAAY,gCAAO,EACnB,OAAO,MAAM;AAEV,UAAQ,KAAK,OAAO,SAAS,eAAe,QAAQ,QAAQ,CAAC,IAAI,mBAAU,CAAC;AAChF,CAAC;AAEL,QAAQ,MAAM;","names":[]}