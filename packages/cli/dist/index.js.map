{"version":3,"sources":["../src/index.ts","../src/configs/text.config.ts","../src/configs/prompts.config.ts"],"sourcesContent":["#!/usr/bin/env node\nimport { program } from \"commander\";\nimport picocolors from \"picocolors\"; // ‰πüÂèØÁî®chalk\nimport figlet from 'figlet';\nimport prompts from 'prompts'; // ‰πüÂèØÁî®inquirer„ÄÅÊâãÂä®readlineÁ≠â\nimport consola from \"consola\";\nimport ora from 'ora';\nimport { downloadTemplate } from 'giget';\nimport path from 'node:path';\nimport fsExtra from 'fs-extra';\nimport textConfig from './configs/text.config.ts';\nimport promptsConfig from \"./configs/prompts.config.ts\";\n\n\n// ËæìÂá∫È°πÁõÆ‰ø°ÊÅØ\nconst logInfo = () => {\n    console.info(picocolors.yellow(figlet.textSync('React Nest CLI', textConfig)))\n    consola.start(picocolors.yellow(program.description()))\n    consola.info(picocolors.yellow(program.version()))\n}\n\nconst packageJsonPath = path.resolve(import.meta.dirname, '../../../package.json');\nconst packageJson = JSON.parse(fsExtra.readFileSync(packageJsonPath, 'utf-8'));\n\nconsole.log(packageJsonPath, packageJson);\n\nprogram\n    .version(packageJson.version, '-V, --version', 'ËæìÂá∫ÁâàÊú¨Âè∑')\n    .helpOption('-h, --help', 'ËæìÂá∫Â∏ÆÂä©‰ø°ÊÅØ')\n    // .help((str) => 'Â∏ÆÂä©‰ø°ÊÅØÔºö\\n' + str)\n    .description(packageJson.description)\n    .action(logInfo);\n\n// ËæìÂá∫È°πÁõÆ‰ø°ÊÅØ\nprogram\n    .command('info')\n    .description('ËæìÂá∫È°πÁõÆ‰ø°ÊÅØ')\n    .action(logInfo);\n\n// ÂàùÂßãÂåñÈ°πÁõÆ\nprogram\n    .command('init')\n    .description('ÂàùÂßãÂåñÈ°πÁõÆ')\n    .argument('[project-name]', 'È°πÁõÆÂêçÁß∞')\n    .option('--template <template-name>', 'È°πÁõÆÊ®°ÊùøÂêçÁß∞')\n    .action(async (projectName, rest) => {\n        let { template } = rest || {};\n        // Â¶ÇÊûúprojectNameÊ≤°ÊúâÊèê‰æõÔºåËÆ©Áî®Êà∑ËæìÂÖ•\n        if (!projectName) {\n            const response = await prompts({\n                type: 'text',\n                initial: 'my-project', // ÈªòËÆ§ÂÄº\n                name: 'projectName',\n                message: 'ËØ∑ËæìÂÖ•È°πÁõÆÂêçÁß∞',\n                // validate: value => value.length ? true : 'ËØ∑ËæìÂÖ•È°πÁõÆÂêçÁß∞'\n            });\n            projectName = response.projectName;\n        }\n\n        // Â¶ÇÊûútemplateÊ≤°ÊúâÊèê‰æõÊàñËÄÖtemplate‰∏çÂ≠òÂú®ÔºåËÆ©Áî®Êà∑ÈÄâÊã©\n        const noTemplate = (template && !promptsConfig.templates.find(item => item.value === template));\n        if (!template || noTemplate) {\n            if (noTemplate) {\n                consola.error(`È°πÁõÆÊ®°Êùø ${template} ‰∏çÂ≠òÂú®, ËØ∑ÈÄâÊã©ÂÖ∂‰ªñÊ®°Êùø`);\n            }\n            const response = await prompts({\n                type: 'select',\n                name: 'template',\n                message: 'ËØ∑ÈÄâÊã©È°πÁõÆÊ®°Êùø',\n                choices: promptsConfig.templates,\n                initial: 0, // ÈªòËÆ§ÈÄâÊã©Á¨¨‰∏Ä‰∏™\n            });\n            template = response.template;\n        }\n\n        const tip = `ÂàùÂßãÂåñÈ°πÁõÆ ${projectName}ÔºåÊ®°Êùø ${template}`;\n        const spinner = ora({\n            text: tip,\n            color: 'blue',\n            // spinner: 'growVertical',\n            // isEnabled: false\n        });\n        spinner.start();\n\n        const projectDir = path.resolve(import.meta.dirname, projectName);\n        if (fsExtra.existsSync(projectDir)) {\n            spinner.fail(`üí•ÂàùÂßãÂåñÂ§±Ë¥•: È°πÁõÆÁõÆÂΩï ${projectName} Â∑≤Â≠òÂú®`);\n            return;\n        }\n\n        const res = await downloadTemplate(`github:liaolonghui/react-nest-cli/packages/templates/${template}#main`, {\n            dir: projectDir,\n        });\n        const { dir } = res;\n        spinner.succeed(`È°πÁõÆÂàùÂßãÂåñÊàêÂäüÔºåÈ°πÁõÆÁõÆÂΩïÔºö${dir}`);\n        // console.log(res);\n\n    });\n\n// ËæìÂá∫ÁâàÊú¨Âè∑\nprogram.command('version')\n    .description('ËæìÂá∫ÁâàÊú¨Âè∑')\n    .action(() => {\n        // ÂÖ®Â±Äoption -V, --version Â∑≤Ë¢´Ê≥®ÂÜåÔºåËøôÈáåÊó†ÈúÄÂÜçÊ≥®ÂÜåversionÂëΩ‰ª§ÔºåÂè™ÊòØ‰∏∫‰∫ÜÊºîÁ§∫\n        consola.info(figlet.textSync(`version ==> ${program.version()}`, textConfig));\n    });\n\nprogram.parse();","import type { FigletOptions } from \"figlet\";\n\nexport default {\n    font: \"Ghost\",\n    horizontalLayout: \"default\",\n    verticalLayout: \"default\",\n    width: 200,\n    whitespaceBreak: true,\n} as FigletOptions","\n\nexport default {\n    templates: [\n        { title: 'React + Nest', value: 'react-nest', description: 'Ëøô‰∏™Ê®°ÊùøÂåÖÂê´‰∫Ü React + Nest È°πÁõÆÁöÑÂü∫Êú¨ÈÖçÁΩÆ', disabled: false },\n        { title: 'React + Nest + TypeScript', value: 'react-nest-ts', description: 'Ëøô‰∏™Ê®°ÊùøÂåÖÂê´‰∫Ü React + Nest + TypeScript È°πÁõÆÁöÑÂü∫Êú¨ÈÖçÁΩÆ', disabled: false },\n    ]\n}"],"mappings":"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","names":[]}